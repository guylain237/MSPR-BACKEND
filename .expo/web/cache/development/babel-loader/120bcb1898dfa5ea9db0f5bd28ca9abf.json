{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _vars = _interopRequireDefault(require(\"./replacers/vars\"));\nvar _mediaQueries = _interopRequireDefault(require(\"./replacers/media-queries\"));\nvar _value = _interopRequireDefault(require(\"./value\"));\nvar _utils = _interopRequireDefault(require(\"./utils\"));\nvar _default = function () {\n  function _default(source) {\n    var varsArr = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    (0, _classCallCheck2.default)(this, _default);\n    this.source = source;\n    this.varsArr = varsArr;\n    this.processedSource = null;\n    this.extractedVars = null;\n    this.extractedProps = null;\n    this.calculatedVars = null;\n    this.calculatedProps = null;\n  }\n  (0, _createClass2.default)(_default, [{\n    key: \"calc\",\n    value: function calc() {\n      this.processSource();\n      this.calcVars();\n      this.calcProps();\n      this.tryOutline();\n      return {\n        calculatedVars: this.calculatedVars,\n        calculatedProps: this.calculatedProps\n      };\n    }\n  }, {\n    key: \"processSource\",\n    value: function processSource() {\n      this.processedSource = _mediaQueries.default.process(this.source);\n    }\n  }, {\n    key: \"calcVars\",\n    value: function calcVars() {\n      this.extractedVars = _vars.default.extract(this.processedSource);\n      if (this.extractedVars) {\n        var varsArrForVars = [this.extractedVars].concat(this.varsArr);\n        this.calculatedVars = calcPlainObject(this.extractedVars, varsArrForVars);\n        this.varsArr = [this.calculatedVars].concat(this.varsArr);\n      }\n    }\n  }, {\n    key: \"calcProps\",\n    value: function calcProps() {\n      this.extractedProps = _utils.default.excludeKeys(this.processedSource, this.extractedVars);\n      this.calculatedProps = calcPlainObject(this.extractedProps, this.varsArr);\n    }\n  }, {\n    key: \"tryOutline\",\n    value: function tryOutline() {\n      var outline = _vars.default.get('$outline', this.varsArr);\n      if (outline) {\n        this.calculatedProps.borderWidth = typeof outline === 'number' ? outline : 1;\n        this.calculatedProps.borderColor = getRandomColor();\n      }\n    }\n  }]);\n  return _default;\n}();\nexports.default = _default;\nfunction calcPlainObject(obj, varsArr) {\n  return Object.keys(obj).reduce(function (res, prop) {\n    res[prop] = calcStyleValue(prop, obj[prop], varsArr);\n    return res;\n  }, {});\n}\nfunction calcStyleValue(prop, value, varsArr) {\n  var isNestedValue = value && typeof value === 'object' && !Array.isArray(value);\n  return isNestedValue ? calcPlainObject(value, varsArr) : new _value.default(value, prop, varsArr).calc();\n}\nfunction getRandomColor() {\n  var colors = ['black', 'red', 'green', 'blue'];\n  var index = Math.round(Math.random() * (colors.length - 1));\n  return colors[index];\n}","map":{"version":3,"names":["_vars","_interopRequireDefault","require","_mediaQueries","_value","_utils","_default","source","varsArr","arguments","length","undefined","_classCallCheck2","default","processedSource","extractedVars","extractedProps","calculatedVars","calculatedProps","_createClass2","key","value","calc","processSource","calcVars","calcProps","tryOutline","mediaQueries","process","vars","extract","varsArrForVars","concat","calcPlainObject","utils","excludeKeys","outline","get","borderWidth","borderColor","getRandomColor","exports","obj","Object","keys","reduce","res","prop","calcStyleValue","isNestedValue","Array","isArray","Value","colors","index","Math","round","random"],"sources":["C:/Users/guyla/Desktop/ios/react/node_modules/react-native-extended-stylesheet/src/style.js"],"sourcesContent":["/**\n * Style\n */\n\nimport vars from './replacers/vars';\nimport mediaQueries from './replacers/media-queries';\nimport Value from './value';\nimport utils from './utils';\n\nexport default class {\n  /**\n   * Constructor\n   * @param {Object} source plain object style with variables\n   * @param {Array} [varsArr] array of vars objects\n   */\n  constructor(source, varsArr = []) {\n    this.source = source;\n    this.varsArr = varsArr;\n    this.processedSource = null;\n    this.extractedVars = null;\n    this.extractedProps = null;\n    this.calculatedVars = null;\n    this.calculatedProps = null;\n  }\n\n  /**\n   * Calculates style\n   * @returns {Object}\n   */\n  calc() {\n    this.processSource();\n    this.calcVars();\n    this.calcProps();\n    this.tryOutline();\n    return {\n      calculatedVars: this.calculatedVars,\n      calculatedProps: this.calculatedProps,\n    };\n  }\n\n  processSource() {\n    this.processedSource = mediaQueries.process(this.source);\n  }\n\n  calcVars() {\n    this.extractedVars = vars.extract(this.processedSource);\n    if (this.extractedVars) {\n      const varsArrForVars = [this.extractedVars].concat(this.varsArr);\n      this.calculatedVars = calcPlainObject(this.extractedVars, varsArrForVars);\n      this.varsArr = [this.calculatedVars].concat(this.varsArr);\n    }\n  }\n\n  calcProps() {\n    this.extractedProps = utils.excludeKeys(this.processedSource, this.extractedVars);\n    this.calculatedProps = calcPlainObject(this.extractedProps, this.varsArr);\n  }\n\n  tryOutline() {\n    let outline = vars.get('$outline', this.varsArr);\n    if (outline) {\n      this.calculatedProps.borderWidth = typeof outline === 'number' ? outline : 1;\n      this.calculatedProps.borderColor = getRandomColor();\n    }\n  }\n\n}\n\n/**\n * Calculates values in plain object\n *\n * @param {Object} obj\n * @param {Array} varsArr\n * @returns {Object}\n */\nfunction calcPlainObject(obj, varsArr) {\n  return Object.keys(obj).reduce((res, prop) => {\n    res[prop] = calcStyleValue(prop, obj[prop], varsArr);\n    return res;\n  }, {});\n}\n\n/**\n * Calculates single value\n * @param {String} prop\n * @param {*} value\n * @param {Array} varsArr\n */\nfunction calcStyleValue(prop, value, varsArr) {\n  const isNestedValue = value && typeof value === 'object' && !Array.isArray(value);\n  return isNestedValue\n    ? calcPlainObject(value, varsArr)\n    : new Value(value, prop, varsArr).calc();\n}\n\n/**\n * Returns random color (needed for outline)\n * @returns {String}\n */\nfunction getRandomColor() {\n  let colors = [\n    'black',\n    'red',\n    'green',\n    'blue',\n  ];\n  let index = Math.round(Math.random() * (colors.length - 1));\n  return colors[index];\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}