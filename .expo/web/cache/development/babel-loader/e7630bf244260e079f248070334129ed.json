{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _reactNative = require(\"react-native\");\nvar _style = _interopRequireDefault(require(\"./style\"));\nvar _utils = _interopRequireDefault(require(\"./utils\"));\nvar _vars = _interopRequireDefault(require(\"./replacers/vars\"));\nvar _mediaQueries = _interopRequireDefault(require(\"./replacers/media-queries\"));\nvar _default = function () {\n  function _default(source) {\n    (0, _classCallCheck2.default)(this, _default);\n    this.source = source;\n    this.result = {};\n    this.cache = new Map();\n    this.nativeSheet = {};\n    this.globalVars = null;\n    this.localVars = null;\n    this.allVars = null;\n    this.processedSource = null;\n  }\n  (0, _createClass2.default)(_default, [{\n    key: \"calc\",\n    value: function calc(globalVars) {\n      this.globalVars = globalVars;\n      this.clearResult();\n      if (this.hasCache()) {\n        this.applyCache();\n      } else {\n        this.processMediaQueries();\n        this.calcVars();\n        this.calcStyles();\n        this.calcNative();\n        this.storeCache();\n      }\n      return this.getResult();\n    }\n  }, {\n    key: \"processMediaQueries\",\n    value: function processMediaQueries() {\n      this.processedSource = _mediaQueries.default.process(this.source);\n    }\n  }, {\n    key: \"calcVars\",\n    value: function calcVars() {\n      var rawLocalVars = _vars.default.extract(this.processedSource);\n      if (rawLocalVars) {\n        this.localVars = new _style.default(rawLocalVars, [rawLocalVars, this.globalVars]).calc().calculatedVars;\n        (0, _extends2.default)(this.result, this.localVars);\n      } else {\n        this.localVars = null;\n      }\n      this.allVars = [this.localVars, this.globalVars].filter(Boolean);\n    }\n  }, {\n    key: \"calcStyles\",\n    value: function calcStyles() {\n      var _this = this;\n      var extractedStyles = _utils.default.excludeKeys(this.processedSource, this.localVars);\n      Object.keys(extractedStyles).forEach(function (key) {\n        var styles = extractedStyles[key];\n        if (typeof styles === 'function') {\n          styles = styles();\n        }\n        if (styles && typeof styles === 'object') {\n          _this.calcStyle(key, styles);\n        } else {\n          _this.result[key] = styles;\n        }\n      });\n    }\n  }, {\n    key: \"calcStyle\",\n    value: function calcStyle(key, styleProps) {\n      var style = new _style.default(styleProps, this.allVars);\n      var _style$calc = style.calc(),\n        calculatedProps = _style$calc.calculatedProps,\n        calculatedVars = _style$calc.calculatedVars;\n      var merged = (0, _extends2.default)({}, calculatedVars, calculatedProps);\n      if (key.charAt(0) === '_') {\n        this.result[key] = merged;\n      } else {\n        this.result['_' + key] = merged;\n        this.nativeSheet[key] = calculatedProps;\n      }\n    }\n  }, {\n    key: \"calcNative\",\n    value: function calcNative() {\n      if (Object.keys(this.nativeSheet).length) {\n        var rnStyleSheet = _reactNative.StyleSheet.create(this.nativeSheet);\n        (0, _extends2.default)(this.result, rnStyleSheet);\n      }\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult() {\n      return this.result;\n    }\n  }, {\n    key: \"clearResult\",\n    value: function clearResult() {\n      var _this2 = this;\n      Object.keys(this.result).forEach(function (key) {\n        return delete _this2.result[key];\n      });\n    }\n  }, {\n    key: \"hasCache\",\n    value: function hasCache() {\n      var key = this.getCacheKey();\n      return key && this.cache.has(key);\n    }\n  }, {\n    key: \"applyCache\",\n    value: function applyCache() {\n      var cachedResult = this.cache.get(this.getCacheKey());\n      (0, _extends2.default)(this.result, cachedResult);\n    }\n  }, {\n    key: \"storeCache\",\n    value: function storeCache() {\n      var key = this.getCacheKey();\n      if (key) {\n        this.cache.set(key, (0, _extends2.default)({}, this.result));\n      }\n    }\n  }, {\n    key: \"clearCache\",\n    value: function clearCache() {\n      this.cache.clear();\n    }\n  }, {\n    key: \"getCacheKey\",\n    value: function getCacheKey() {\n      return this.globalVars && this.globalVars.$theme;\n    }\n  }]);\n  return _default;\n}();\nexports.default = _default;","map":{"version":3,"names":["_reactNative","require","_style","_interopRequireDefault","_utils","_vars","_mediaQueries","_default","source","_classCallCheck2","default","result","cache","Map","nativeSheet","globalVars","localVars","allVars","processedSource","_createClass2","key","value","calc","clearResult","hasCache","applyCache","processMediaQueries","calcVars","calcStyles","calcNative","storeCache","getResult","mediaQueries","process","rawLocalVars","vars","extract","Style","calculatedVars","_extends2","filter","Boolean","_this","extractedStyles","utils","excludeKeys","Object","keys","forEach","styles","calcStyle","styleProps","style","_style$calc","calculatedProps","merged","charAt","length","rnStyleSheet","StyleSheet","create","_this2","getCacheKey","has","cachedResult","get","set","clearCache","clear","$theme","exports"],"sources":["C:/Users/guyla/Desktop/ios/react/node_modules/react-native-extended-stylesheet/src/sheet.js"],"sourcesContent":["import {StyleSheet} from 'react-native';\nimport Style from './style';\nimport utils from './utils';\nimport vars from './replacers/vars';\nimport mediaQueries from './replacers/media-queries';\n\nexport default class {\n  /**\n   * Constructor\n   * @param {Object} source\n   */\n  constructor(source) {\n    this.source = source;\n    this.result = {};\n    this.cache = new Map(); // cache result for each theme\n    this.nativeSheet = {};\n    this.globalVars = null;\n    this.localVars = null;\n    this.allVars = null;\n    this.processedSource = null;\n  }\n\n  /**\n   * Calculates sheet and update result\n   * @param {Object} globalVars\n   */\n  calc(globalVars) {\n    this.globalVars = globalVars;\n    this.clearResult();\n    if (this.hasCache()) {\n      this.applyCache();\n    } else {\n      this.processMediaQueries();\n      this.calcVars();\n      this.calcStyles();\n      this.calcNative();\n      this.storeCache();\n    }\n    return this.getResult();\n  }\n\n  processMediaQueries() {\n    this.processedSource = mediaQueries.process(this.source);\n  }\n\n  calcVars() {\n    const rawLocalVars = vars.extract(this.processedSource);\n    if (rawLocalVars) {\n      this.localVars = new Style(rawLocalVars, [rawLocalVars, this.globalVars]).calc().calculatedVars;\n      Object.assign(this.result, this.localVars);\n    } else {\n      this.localVars = null;\n    }\n    this.allVars = [this.localVars, this.globalVars].filter(Boolean);\n  }\n\n  calcStyles() {\n    const extractedStyles = utils.excludeKeys(this.processedSource, this.localVars);\n    Object.keys(extractedStyles).forEach(key => {\n      let styles = extractedStyles[key];\n      if (typeof styles === 'function') {\n        styles = styles();\n      }\n      if (styles && typeof styles === 'object') {\n        this.calcStyle(key, styles);\n      } else {\n        // copy primitive values to result as-is\n        this.result[key] = styles;\n      }\n    });\n  }\n\n  calcStyle(key, styleProps) {\n    const style = new Style(styleProps, this.allVars);\n    const {calculatedProps, calculatedVars} = style.calc();\n    const merged = Object.assign({}, calculatedVars, calculatedProps);\n    if (key.charAt(0) === '_') {\n      this.result[key] = merged;\n    } else {\n      this.result['_' + key] = merged;\n      this.nativeSheet[key] = calculatedProps;\n    }\n  }\n\n  calcNative() {\n    if (Object.keys(this.nativeSheet).length) {\n      const rnStyleSheet = StyleSheet.create(this.nativeSheet);\n      Object.assign(this.result, rnStyleSheet);\n    }\n  }\n\n  getResult() {\n    return this.result;\n  }\n\n  clearResult() {\n    Object.keys(this.result).forEach(key => delete this.result[key]);\n  }\n\n  hasCache() {\n    const key = this.getCacheKey();\n    return key && this.cache.has(key);\n  }\n\n  applyCache() {\n    const cachedResult = this.cache.get(this.getCacheKey());\n    Object.assign(this.result, cachedResult);\n  }\n\n  storeCache() {\n    const key = this.getCacheKey();\n    if (key) {\n      this.cache.set(key, Object.assign({}, this.result));\n    }\n  }\n\n  clearCache() {\n    this.cache.clear();\n  }\n\n  getCacheKey() {\n    return this.globalVars && this.globalVars.$theme;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}